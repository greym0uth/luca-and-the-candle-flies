[gd_scene load_steps=16 format=4 uid="uid://6m4g2q80t6kr"]

[ext_resource type="PackedScene" uid="uid://cpfakcolyervk" path="res://levels/level.tscn" id="1_w50jk"]
[ext_resource type="PackedScene" uid="uid://csyuydyv7hs4n" path="res://tiles/layers/toggle_layer.tscn" id="2_pfyyv"]
[ext_resource type="PackedScene" uid="uid://covog2qyrl0i1" path="res://tiles/layers/base.tscn" id="2_to2qf"]
[ext_resource type="PackedScene" uid="uid://8gohnbqmbf2i" path="res://objects/conduit.tscn" id="3_mlh4s"]
[ext_resource type="PackedScene" uid="uid://c1p4scosqoe4r" path="res://objects/log.tscn" id="4_ofg5d"]
[ext_resource type="PackedScene" uid="uid://dskiuob25htxu" path="res://tendril_flipped.tscn" id="4_rlwuh"]
[ext_resource type="PackedScene" uid="uid://dmjo0ha3vaboe" path="res://tendril.tscn" id="5_bfcef"]
[ext_resource type="PackedScene" uid="uid://47am5i3du6t3" path="res://triggers/trigger.tscn" id="5_n0x2r"]
[ext_resource type="PackedScene" uid="uid://b7b8nhqnvv3ga" path="res://triggers/axe.tscn" id="7_430iv"]
[ext_resource type="PackedScene" uid="uid://0xlivsywdqkr" path="res://objects/lamp.tscn" id="8_4eihk"]
[ext_resource type="PackedScene" uid="uid://bb8wdyrusk0dj" path="res://objects/tree.tscn" id="9_ukgi0"]
[ext_resource type="PackedScene" uid="uid://bmybj3bp0v1dr" path="res://triggers/go_to_level.tscn" id="10_w721e"]
[ext_resource type="PackedScene" uid="uid://dkmdt6k7uoifl" path="res://levels/level_end.tscn" id="11_xfrsd"]
[ext_resource type="PackedScene" uid="uid://dcmaibssowcvg" path="res://ui/dialogue.tscn" id="12_17cwd"]
[ext_resource type="PackedScene" uid="uid://cy5mjilkmrkqk" path="res://ui/instruction.tscn" id="13_ri336"]

[node name="LevelThree" instance=ExtResource("1_w50jk")]
firefly_count = 2

[node name="Base" parent="Map" index="0"]
tile_map_data = PackedByteArray("AAD+/wAAAwAAAAAAAgD+/wEAAwAAAAAAAwD+/wIAAwAAAAAAAwD//wIAAwAAAAAAAQD//wMAAwAAAAAABQAAAAMAAwAAAAAAAQAAAAIAAwAAAAAAAgABAAIAAwAAAAAAAwABAAEAAwAAAAAAAwABAAAAAwAAAAAABAAAAAAAAwAAAAAAAQAAAP//AwAAAAAAAQD/////BAAAAAAAAwD//wAABAAAAAAAAwD//wEAAwAAAAAABQAAAAEAAwAAAAAAAgABAAMABAAAAAAAAwACAAIABAAAAAAAAgACAAEAAwAAAAAABAACAAAABAAAAAAAAQABAP//AwAAAAAAAwD8/wIAAwAAAAAAAwD8/wEABAAAAAAAAwD8/wAABAAAAAAAAgD7/wAAAwAAAAAAAgD7/wEAAwAAAAAAAQD7/wIAAwAAAAAABQD///3/AwAAAAAAAQAAAP3/AwAAAAAAAQABAP3/AwAAAAAAAwD///z/AwAAAAAABQAAAPz/AwAAAAAABQABAPz/AwAAAAAABAABAP7/AwAAAAAAAgD///7/AwAAAAAABQD6/wAAAwAAAAAAAQD6/wEAAwAAAAAABQD6/wIABAAAAAAAAgD+/wMABAAAAAAAAwD9/wMAAgAAAAAAAQD///v/BAAAAAAAAQAAAPv/AwAAAAAAAgABAPv/BAAAAAAAAwD5/wAAAwAAAAAABQD5/wEABAAAAAAAAwD4/wAAAwAAAAAABAD5////AwAAAAAAAQD4////AwAAAAAAAQD4/wEAAwAAAAAAAgD6////AwAAAAAAAgD7////AwAAAAAABAD6//7/BAAAAAAAAgD5//7/AwAAAAAABAD3/wAAAwAAAAAABQD3/wEAAwAAAAAABQD2/wAAAwAAAAAABQD2/wEAAwAAAAAAAQD3/wIAAwAAAAAAAQD2/wIAAwAAAAAAAQD1/wEABAAAAAAAAwD1/wAABAAAAAAAAwD2////AwAAAAAAAgD1////AwAAAAAABQD0////AwAAAAAABAD2//7/AwAAAAAAAQD1//7/AwAAAAAAAQD0//7/AwAAAAAABQD0//3/AwAAAAAAAwD1//3/AwAAAAAAAgD0//z/BAAAAAAAAwD1//z/BAAAAAAAAQD0//v/BAAAAAAAAwD0/wAABAAAAAAAAwACAAMAAQAAAAAAAQACAAQAAQAAAAAAAQABAAQAAQAAAAAAAQAAAAQAAQAAAAAAAQD//wQAAQAAAAAAAQD+/wQAAgAAAAAAAQD9/wQAAgAAAAAAAgD8/wQAAgAAAAAAAwADAAMAAQAAAAAAAQADAAIAAQAAAAAAAQADAAEAAQAAAAAAAQADAAAAAQAAAAAAAQADAP//AQAAAAAAAQACAP//AQAAAAAAAQACAP7/AQAAAAAAAQACAP3/AQAAAAAAAQACAPz/AQAAAAAAAQACAPv/AQAAAAAAAQACAPr/AQAAAAAAAQABAPr/AQAAAAAAAQAAAPr/AQAAAAAAAQD///r/AQAAAAAAAQD+//r/AQAAAAAAAQD+//v/AQAAAAAAAQD+//z/AgAAAAAAAwD+//3/AgAAAAAAAQD+//7/AgAAAAAAAgD+////AgAAAAAAAQD9////AgAAAAAAAQD8////AgAAAAAAAQD8//7/AgAAAAAAAwD7//7/AgAAAAAAAwD7//3/AgAAAAAAAwD6//3/AgAAAAAAAwD5//3/AQAAAAAAAQD4//3/AQAAAAAAAQD4//7/AQAAAAAAAQD3////AQAAAAAAAQD3//7/AQAAAAAAAQD2//3/AQAAAAAAAQD3//3/AQAAAAAAAQD2//z/AQAAAAAAAQD2//v/AQAAAAAAAQD1//v/AQAAAAAAAQD1//r/AQAAAAAAAQD0//r/BAAAAAAAAQDz//r/AQAAAAAAAQDz//v/AQAAAAAAAQDz//z/AQAAAAAAAQDz//3/AQAAAAAAAQDz//7/AQAAAAAAAQDz////AQAAAAAAAQDz/wAAAQAAAAAAAQDz/wEAAQAAAAAAAQD0/wEAAQAAAAAAAQD0/wIAAQAAAAAAAQD1/wIAAQAAAAAAAQD1/wMAAQAAAAAAAQD2/wMAAQAAAAAAAQD3/wMAAQAAAAAAAQD4/wMAAQAAAAAAAQD4/wIAAQAAAAAAAQD5/wIAAQAAAAAAAQD5/wMAAQAAAAAAAQD6/wMAAQAAAAAAAQD7/wMAAgAAAAAAAgD8/wMAAgAAAAAAAgD9/wUAAgAAAAAAAwD9//7/AgAAAAAAAQD9//3/AgAAAAAAAgD0//n/BAAAAAAAAwDz//n/AQAAAAAAAQDz//j/AQAAAAAAAQD0//j/AQAAAAAAAQD1//j/AQAAAAAAAQD1//n/AQAAAAAAAQA=")

[node name="Base2" parent="Map" index="1" instance=ExtResource("2_to2qf")]
tile_map_data = PackedByteArray("AAD+/wAAAwAAAAAAAQD+/wEAAwAAAAAAAQD+/wIAAwAAAAAAAQD//wIAAwAAAAAAAQD//wMAAwAAAAAAAQAAAAMAAwAAAAAAAQAAAAIAAwAAAAAAAQABAAIAAwAAAAAAAQABAAEAAwAAAAAAAQABAAAAAwAAAAAAAQAAAAAAAwAAAAAAAQAAAP//AwAAAAAAAQD/////AwAAAAAAAQD//wAAAwAAAAAAAQD//wEAAwAAAAAAAQAAAAEAAwAAAAAAAQABAAMAAwAAAAAAAQACAAIAAwAAAAAAAQACAAEAAwAAAAAAAQACAAAAAwAAAAAAAQABAP//AwAAAAAAAQD8/wIAAwAAAAAAAQD8/wEAAwAAAAAAAQD8/wAAAwAAAAAAAQD7/wAAAwAAAAAAAQD7/wEAAwAAAAAAAQD7/wIAAwAAAAAAAQD///3/AwAAAAAAAQAAAP3/AwAAAAAAAQABAP3/AwAAAAAAAQD///z/AwAAAAAAAQAAAPz/AwAAAAAAAQABAPz/AwAAAAAAAQABAP7/AAAAAAAAAgD///7/AAAAAAAAAgD6/wAAAwAAAAAAAQD6/wEAAwAAAAAAAQD6/wIAAwAAAAAAAQD+/wMAAwAAAAAAAQD9/wMAAgAAAAAAAQA=")

[node name="ToggleLayer" parent="Map" index="2" instance=ExtResource("2_pfyyv")]
tile_map_data = PackedByteArray("AAD9/wEAAAAAAAAAAQD9/wIAAAAAAAAAAQD9/wAAAAAAAAAAAQA=")

[node name="ToggleLayer2" parent="Map" index="3" instance=ExtResource("2_pfyyv")]
tile_map_data = PackedByteArray("AAAAAP7/AAAAAAAAAgA=")

[node name="Tendril" parent="Sorted/Shadows" index="0" instance=ExtResource("4_rlwuh")]
position = Vector2(-779, -520)

[node name="Tendril2" parent="Sorted/Shadows" index="1" instance=ExtResource("5_bfcef")]
position = Vector2(-1159, -839)

[node name="Log" parent="Sorted/Objects" index="0" instance=ExtResource("4_ofg5d")]
position = Vector2(-633, -186)
collision_layer = 128

[node name="Conduit" parent="Sorted/Objects" index="1" instance=ExtResource("3_mlh4s")]
position = Vector2(510, -244)

[node name="Lamp" parent="Sorted/Objects" index="2" instance=ExtResource("8_4eihk")]
position = Vector2(-1407, -463)

[node name="Tree" parent="Sorted/Objects" index="3" instance=ExtResource("9_ukgi0")]
position = Vector2(-574, -526)

[node name="GoToLevel" parent="Sorted/Triggers" index="0" instance=ExtResource("10_w721e")]
position = Vector2(-725, -1054)
level = ExtResource("11_xfrsd")

[node name="LogAcceptor" parent="Sorted/Triggers" index="1" instance=ExtResource("5_n0x2r")]
collision_mask = 128

[node name="Axe" parent="Sorted/Triggers" index="2" instance=ExtResource("7_430iv")]
position = Vector2(772, -131)

[node name="Trigger" parent="Sorted/Triggers" index="3" instance=ExtResource("5_n0x2r")]
position = Vector2(-500, -391)
rotation = 1.35392
scale = Vector2(1.94752, 4.76168)
collision_mask = 2

[node name="Trigger2" parent="Sorted/Triggers" index="4" instance=ExtResource("5_n0x2r")]
position = Vector2(4, 118)
collision_mask = 2

[node name="Footer" type="MarginContainer" parent="UI" index="0"]
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -196.0
offset_top = -95.0
offset_right = 196.0
grow_horizontal = 2
grow_vertical = 0
size_flags_horizontal = 4
size_flags_vertical = 8
theme_override_constants/margin_left = 12
theme_override_constants/margin_top = 0
theme_override_constants/margin_right = 12
theme_override_constants/margin_bottom = 24

[node name="VBoxContainer" type="VBoxContainer" parent="UI/Footer" index="0"]
layout_mode = 2
theme_override_constants/separation = 12

[node name="Dialogue" parent="UI/Footer/VBoxContainer" index="0" instance=ExtResource("12_17cwd")]
layout_mode = 2
entries = Array[String](["That axe is obstructed maybe I can make a bridge of some kind?", "Maybe I can use an axe to clear the way."])

[node name="Center" type="MarginContainer" parent="UI" index="1"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_top = 256

[node name="Instruction" parent="UI/Center" index="0" instance=ExtResource("13_ri336")]
layout_mode = 2
entries = Array[String](["You push logs by walking into them.", "Press space while near a tree to use the axe."])

[connection signal="on_powered" from="Sorted/Objects/Conduit" to="Map/ToggleLayer" method="enable"]
[connection signal="on_unpowered" from="Sorted/Objects/Conduit" to="Map/ToggleLayer" method="disable"]
[connection signal="on_powered" from="Sorted/Objects/Lamp" to="." method="on_complete"]
[connection signal="felled" from="Sorted/Objects/Tree" to="Sorted/Shadows/Tendril" method="queue_free"]
[connection signal="on_triggered" from="Sorted/Triggers/GoToLevel" to="." method="_on_go_next_level"]
[connection signal="triggered" from="Sorted/Triggers/LogAcceptor" to="Map/ToggleLayer2" method="enable"]
[connection signal="triggered" from="Sorted/Triggers/LogAcceptor" to="Sorted/Objects/Log" method="queue_free"]
[connection signal="triggered" from="Sorted/Triggers/Axe" to="Sorted/Triggers/Axe" method="queue_free"]
[connection signal="triggered" from="Sorted/Triggers/Axe" to="UI/Center/Instruction" method="next_entry"]
[connection signal="triggered" from="Sorted/Triggers/Axe" to="Sorted/Keeper" method="add_item" binds= ["axe"]]
[connection signal="triggered" from="Sorted/Triggers/Trigger" to="UI/Footer/VBoxContainer/Dialogue" method="next_entry" flags=6]
[connection signal="triggered" from="Sorted/Triggers/Trigger2" to="UI/Footer/VBoxContainer/Dialogue" method="next_entry" flags=6]
[connection signal="triggered" from="Sorted/Triggers/Trigger2" to="UI/Center/Instruction" method="next_entry" flags=6]
